<p id="notice"><%= notice %></p>

<div>
  <h3>Import a CSV File</h3>
  <%= form_tag import_registros_path, multipart: true do %>
    <%= file_field_tag :file %>
    <%= submit_tag "Import CSV" %>
  <% end %>
</div>

<h1>Listing Registros</h1>

<script type="text/javascript" charset="utf-8">
  $(function() {
    var chart = new Highcharts.Chart({
      chart:{
        renderTo: "registros_chart",
        type: "column"
      },
      title:{
        text:"Estaciones mas Sintonizadas"
      },
      xAxis:{
        type:"datetime"
      },
      yAxis:{
        title:{
          text: "Visitas"
        },
        column: {
        pointPadding: 0,
        borderWidth: 0,
        groupPadding: 0,
        shadow: false
    }
      },
      series:[{
         pointInterval: <%= 1.day * 1000 %>,
         pointStart: <%= 3.weeks.ago.to_i * 1000 %>,
        data: <%= Registro.pluck(:channel) %>
      }]
       
    });
  });
</script>
<div id="registros_chart" style="width:660px; height:400px;"></div>

<table>
  <thead>
    <tr>
      <th>Media</th>
      <th>Channel</th>
      <th>H inicio</th>
      <th>H final</th>
      <th>Location</th>
      <th>User</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @registros.each do |registro| %>
      <tr>
        <td><%= registro.media %></td>
        <td><%= registro.channel %></td>
        <td><%= registro.h_inicio %></td>
        <td><%= registro.h_final %></td>
        <td><%= registro.location %></td>
        <td><%= registro.user %></td>
        <td><%= link_to 'Show', registro %></td>
        <td><%= link_to 'Edit', edit_registro_path(registro) %></td>
        <td><%= link_to 'Destroy', registro, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Registro', new_registro_path %>
